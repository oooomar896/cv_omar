# ๐ ูุฌูุฏ ููุงุนุฏ ุงูุจูุงูุงุช (Database)

ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู ุฌููุน ูููุงุช SQL ุงูุฎุงุตุฉ ุจูุงุนุฏุฉ ุจูุงูุงุช Supabase ููููุตุฉ.

---

## ๐ ุงููููุงุช ุงูุฑุฆูุณูุฉ

### โญ ุงูููู ุงูุดุงูู (ููุตู ุจู)
- **`supabase_complete_database.sql`** - ููู ุดุงูู ูุญุชูู ุนูู ุฌููุน ุงูุฌุฏุงูู ูุงูุณูุงุณุงุช
  - ูุชุถูู ุฌููุน ุงูููุฒุงุช
  - ููุธู ูู ุฃูุณุงู ูุงุถุญุฉ
  - ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููุจุงุดุฑ
  - **ุงุณุชุฎุฏู ูุฐุง ุงูููู ูููุดุงุฑูุน ุงูุฌุฏูุฏุฉ**

---

## ๐ ุงููููุงุช ุงูุฃุณุงุณูุฉ

### Schema ุงูุฃุณุงุณู
- **`supabase_schema.sql`** - Schema ุงูุฃุณุงุณู ุงูุฃููู
  - ุฌุฏุงูู: messages, projects, news, leads
  - RLS policies ุฃุณุงุณูุฉ
  - ููุทุฉ ุงูุจุฏุงูุฉ ูููุดุฑูุน

### ุฅุนุฏุงุฏ ุงููุณุคูููู
- **`supabase_admin_setup.sql`** - ุฅุนุฏุงุฏ ุฌุฏูู ุงููุณุคูููู
  - ุฌุฏูู admins
  - ุฅุฏุฑุงุฌ super admin ุงูุงูุชุฑุงุถู
  - ุชุญุฏูุซ policies ูููุตูู ุงููุงูู

### ุงูุฃูุงู
- **`supabase_secure_rls.sql`** - ุณูุงุณุงุช RLS ุงูุขููุฉ
  - ุณูุงุณุงุช ูุญููุฉ ูููุณุชุฎุฏููู
  - ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
  - ูุตู ุตูุงุญูุงุช ุงููุณุชุฎุฏููู ูุงูุฃุฏูู

---

## ๐ ููุฒุฉ ุงูุฏููููุงุช

### Schema ุงูุฏููููุงุช
- **`supabase_domains_schema.sql`** - ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏููููุงุช ุงููุงูู
  - 6 ุฌุฏุงูู ุฌุฏูุฏุฉ (domains, dns_records, domain_transactions, etc.)
  - RLS policies ููุฏููููุงุช
  - Functions & Triggers
  - Views ููุฅุญุตุงุฆูุงุช
  - **ุงุณุชุฎุฏู ูุฐุง ูุฅุถุงูุฉ ููุฒุฉ ุงูุฏููููุงุช ููุท**

---

## ๐ง ูููุงุช ุงูุฅุตูุงุญุงุช ูุงูุชุญุฏูุซุงุช

### ุงููุดุงุฑูุน
- **`supabase_add_project_stage.sql`** - ุฅุถุงูุฉ ุนููุฏ stage ูููุดุงุฑูุน
- **`supabase_fix_projects_table.sql`** - ุฅุตูุงุญุงุช ุฌุฏูู ุงููุดุงุฑูุน

### ุงููุญุงุฏุซุงุช
- **`supabase_project_chat.sql`** - ุฅูุดุงุก ุฌุฏูู ูุญุงุฏุซุงุช ุงููุดุงุฑูุน
- **`supabase_fix_chat.sql`** - ุฅุตูุงุญุงุช ุงููุญุงุฏุซุงุช
- **`supabase_fix_chat_safe.sql`** - ุฅุตูุงุญุงุช ุขููุฉ ูููุญุงุฏุซุงุช

### ุงูุชุญูููุงุช
- **`supabase_page_visits.sql`** - ุฅูุดุงุก ุฌุฏูู ุฒูุงุฑุงุช ุงูุตูุญุงุช
- **`supabase_fix_page_visits.sql`** - ุฅุตูุงุญุงุช ุฌุฏูู ุงูุฒูุงุฑุงุช

### ุฃุฎุฑู
- **`supabase_schema_update_skills.sql`** - ุชุญุฏูุซ ุฌุฏูู ุงูููุงุฑุงุช
- **`supabase_fix_rls_columns.sql`** - ุฅุตูุงุญุงุช ุฃุนูุฏุฉ RLS

---

## โก ูููุงุช Realtime

- **`supabase_enable_realtime.sql`** - ุชูุนูู Realtime ููุฌุฏุงูู ุงูุฑุฆูุณูุฉ
- **`supabase_enable_vistis_realtime.sql`** - ุชูุนูู Realtime ูุฌุฏูู ุงูุฒูุงุฑุงุช

---

## ๐ ูููุงุช ุงูุตูุงูุฉ

- **`supabase_reload_cache.sql`** - ุฅุนุงุฏุฉ ุชุญููู ุงูู cache

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุดุงุฑูุน ุงูุฌุฏูุฏุฉ (ููุตู ุจู)

1. ุงูุชุญ **Supabase Dashboard**
2. ุงูุชูู ุฅูู **SQL Editor**
3. ุดุบู ุงูููู ุงูุดุงูู:
   ```
   supabase_complete_database.sql
   ```
4. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุชูููุฐ
5. ุชุญูู ูู ุฅูุดุงุก ุงูุฌุฏุงูู

### ูููุดุงุฑูุน ุงูููุฌูุฏุฉ

#### ุฅุถุงูุฉ ููุฒุฉ ุงูุฏููููุงุช ููุท:
```sql
-- ุดุบู ูุฐุง ุงูููู ููุท
supabase_domains_schema.sql
```

#### ุฅุถุงูุฉ ููุฒุงุช ูุญุฏุฏุฉ:
```sql
-- ูุซุงู: ุฅุถุงูุฉ Realtime
supabase_enable_realtime.sql

-- ูุซุงู: ุฅุถุงูุฉ ุชุชุจุน ุงูุฒูุงุฑุงุช
supabase_page_visits.sql
```

#### ุชุทุจูู ุฅุตูุงุญุงุช:
```sql
-- ูุซุงู: ุฅุตูุงุญ ุงููุญุงุฏุซุงุช
supabase_fix_chat_safe.sql
```

---

## ๐ ุชุฑุชูุจ ุงูุชูููุฐ ุงูููุตู ุจู (ููุชุทุจูู ุงููุฏูู)

ุฅุฐุง ููุช ุชุฑูุฏ ุชุทุจูู ุงููููุงุช ุจุงูุชุฑุชูุจ:

```
1. supabase_schema.sql                    # Schema ุงูุฃุณุงุณู
2. supabase_admin_setup.sql               # ุงููุณุคูููู
3. supabase_schema_update_skills.sql      # ุชุญุฏูุซ ุงูููุงุฑุงุช
4. supabase_project_chat.sql              # ูุญุงุฏุซุงุช ุงููุดุงุฑูุน
5. supabase_page_visits.sql               # ุชุชุจุน ุงูุฒูุงุฑุงุช
6. supabase_domains_schema.sql            # ูุธุงู ุงูุฏููููุงุช
7. supabase_secure_rls.sql                # ุณูุงุณุงุช ุงูุฃูุงู
8. supabase_enable_realtime.sql           # Realtime
9. supabase_enable_vistis_realtime.sql    # Realtime ููุฒูุงุฑุงุช
```

โ๏ธ **ููุงุญุธุฉ**: ุงุณุชุฎุฏุงู `supabase_complete_database.sql` ุฃุณูู ูุฃูุซุฑ ุฃูุงูุงู!

---

## ๐ ูุญุชููุงุช ุงูููู ุงูุดุงูู

`supabase_complete_database.sql` ูุชุถูู:

### ุงููุณู 1: Extensions & Setup
- UUID Extension
- pg_cron Extension

### ุงููุณู 2: Core Tables (17 ุฌุฏูู)
- Users & Authentication
- Content Management
- Communication

### ุงููุณู 3: Project Builder & Requests
- Generated Projects
- Service Requests

### ุงููุณู 4: Domain Management (6 ุฌุฏุงูู)
- Websites
- Domains
- DNS Records
- Transactions
- Pricing
- Notifications

### ุงููุณู 5: Analytics
- Page Visits

### ุงููุณู 6: RLS Policies (50+ ุณูุงุณุฉ)
- ุณูุงุณุงุช ุดุงููุฉ ูุฌููุน ุงูุฌุฏุงูู

### ุงููุณู 7: Functions & Triggers (10+)
- Auto-update timestamps
- Domain management
- Notifications

### ุงููุณู 8: Views (3)
- Domain Statistics
- Revenue Statistics
- Visit Statistics

### ุงููุณู 9: Realtime
- ุชูุนูู ููุฌุฏุงูู ุงููููุฉ

### ุงููุณู 10: Initial Data
- Super Admin
- Domain Pricing

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงููุณุฎ ุงูุงุญุชูุงุทู
โ๏ธ **ุฏุงุฆูุงู ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุชุดุบูู ุฃู SQL!**
- ูู Supabase Dashboard > Database > Backups

### 2. ุงูุจูุฆุฉ
- ุงุฎุชุจุฑ ูู ุจูุฆุฉ ุงูุชุทููุฑ ุฃููุงู
- ูุง ุชุดุบู ูู ุงูุฅูุชุงุฌ ูุจุงุดุฑุฉ

### 3. ูููุงุช ุงููุฑูุฑ
โ๏ธ **ุบููุฑ ูููุฉ ูุฑูุฑ ุงูุฃุฏูู ูู ุงูุฅูุชุงุฌ!**
```sql
-- ูู supabase_admin_setup.sql
-- ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ: Omar@2597798
-- ุบููุฑูุง ููุฑุงู ูู ุงูุฅูุชุงุฌ!
```

### 4. ุงูุชุนุงุฑุถุงุช
- ุจุนุถ ุงููููุงุช ูุฏ ุชุชุนุงุฑุถ ูุน ุจุนุถูุง
- ุงุณุชุฎุฏู `IF NOT EXISTS` ู `IF EXISTS` ูุชุฌูุจ ุงูุฃุฎุทุงุก
- ุงูููู ุงูุดุงูู ูุชุนุงูู ูุน ูุฐุง ุชููุงุฆูุงู

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "relation already exists"
```sql
-- ุงุณุชุฎุฏู
CREATE TABLE IF NOT EXISTS ...
-- ุจุฏูุงู ูู
CREATE TABLE ...
```

### ุฎุทุฃ: "policy already exists"
```sql
-- ุงุญุฐู ุงูุณูุงุณุฉ ุงููุฏููุฉ ุฃููุงู
DROP POLICY IF EXISTS "policy_name" ON table_name;
CREATE POLICY "policy_name" ON table_name ...;
```

### ุฎุทุฃ: "permission denied"
- ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู service_role key ูู Supabase
- ุฃู ุงุณุชุฎุฏู SQL Editor ูู Dashboard

---

## ๐ ุงููุซุงุฆู ุงูุฅุถุงููุฉ

ุฑุงุฌุน ุงููููุงุช ุงูุชุงููุฉ ูู ุงููุฌูุฏ ุงูุฑุฆูุณู:
- `DATABASE_GUIDE.md` - ุฏููู ุดุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช
- `DOMAIN_FEATURE_README.md` - ุฏููู ููุฒุฉ ุงูุฏููููุงุช
- `DOMAIN_QUICK_START.md` - ุงูุจุฏุก ุงูุณุฑูุน ููุฏููููุงุช

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููููุงุช

| ุงูููู | ุงูุญุฌู | ุงููุตู |
|------|------|-------|
| supabase_complete_database.sql | ~31 KB | ุงูููู ุงูุดุงูู โญ |
| supabase_domains_schema.sql | ~14 KB | ููุฒุฉ ุงูุฏููููุงุช |
| supabase_secure_rls.sql | ~3 KB | ุณูุงุณุงุช ุงูุฃูุงู |
| supabase_fix_rls_columns.sql | ~2.5 KB | ุฅุตูุงุญุงุช RLS |
| supabase_schema.sql | ~2 KB | Schema ุงูุฃุณุงุณู |
| ... | ... | ... |

**ุงููุฌููุน**: 17 ููู SQL

---

## ๐ฏ ุงูุชูุตูุงุช

### โ ุงูุนู
- ุงุณุชุฎุฏู `supabase_complete_database.sql` ูููุดุงุฑูุน ุงูุฌุฏูุฏุฉ
- ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุชุทุจูู
- ุงุฎุชุจุฑ ูู ุจูุฆุฉ ุงูุชุทููุฑ ุฃููุงู
- ุฑุงุฌุน ุงูููู ูุจู ุงูุชุดุบูู

### โ ูุง ุชูุนู
- ูุง ุชุดุบู ูููุงุช ูุชุนุฏุฏุฉ ูุฏ ุชุชุนุงุฑุถ
- ูุง ุชุทุจู ูู ุงูุฅูุชุงุฌ ูุจุงุดุฑุฉ
- ูุง ุชูุณู ุชุบููุฑ ูููุงุช ุงููุฑูุฑ
- ูุง ุชุญุฐู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ:
- ๐ง **ุงูุจุฑูุฏ**: oooomar123450@gmail.com
- ๐ฑ **ุงููุงุชู**: +966-55-853-9717

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2026-01-13  
**ุนุฏุฏ ุงููููุงุช**: 17  
**ุงูุญุงูุฉ**: โ ููุธู ููุฑุชุจ
